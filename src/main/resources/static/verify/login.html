<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <script src="../js/jquery.min.js"></script>
    <style>
        body {
            text-align: center;
            font-family: "思源黑体 normal", "微软雅黑 Light", monospace;
        }

        form h2 {
            background-color: #fb894b;
            color: #fff;
            margin: 0 0 .7em;
            padding: 3px 8px;
            font-size: 120%;
            line-height: 100%;
        }

        #login_box {
            border: silver 1px solid;
            width: 300px;
            background: url(../image/box_back_gray4.png);
            text-align: center;
        }

        #login_box input {
            margin-top: 10px;
        }

        #login_box #verifyCode {
            margin-top: 10px;
        }

        #login_box div {
            width: 250px;
            margin-bottom: 10px;
            text-align: right;
            display: inline-block;
        }

        .normal_box {
            display: inline-block;
            box-shadow: 5px 5px 10px #888888;
            border: black 1px solid;

        }

        .normal_radius {
            /*border-radius:10px;*/
        }

    </style>
</head>
<body>
<div id="login_box" class="normal_box normal_radius">
    <form>
        <h2>登录</h2>
        <div>
            <label>
                邮箱：
                <input type="text" name="email">
            </label><br>
            <label>
                密码：
                <input type="password" name="password">
            </label><br>
            <label>
                验证码：
                <input type="text" name="verifyCode">
            </label><br>
            <img id="verifyCode" src="/verify/login/code.jpg" alt="验证码"/><br>
            <label>
                记住登录：
                <input type="checkbox" name="autologin" value="True">
            </label><br>
            <input onclick="location.href='register.html'" type="button" value="注册">
            <input id="btn-login" type="button" value="登录">
        </div>
    </form>
</div>
<script>
    // -------common component----------
    let dateUtils = {
        getNowTimes : () => {
          return new Date().getTime();
        },
        getTimesByDate : (date) => {
            return new Date(date);
        }
    }


    //-----------------------------------
    let msg = {
        errorVerifyCodeMSG : "验证码加载失败，请稍后稍后点击验证码进行刷新（由于接口有限制，请不要频繁刷新验证码）"
    }
    $(document).ready(() => {
        bindVerifyImgEvent();
    });

    function bindVerifyImgEvent() {
        let verifyCode = $("#verifyCode");
        $(verifyCode).click(() => {
            document.getElementById("verifyCode").src = "/verify/login/code.jpg?" + dateUtils.getNowTimes();
        });

        $(verifyCode).error((e) => {
            console.log(JSON.stringify(e));
            alert(msg.errorVerifyCodeMSG);
        });
    }

    function bindBtnEvent() {

    }
</script>
</body>
</html>